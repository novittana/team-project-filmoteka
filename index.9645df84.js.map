{"mappings":"oeAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,0BAIA,MAAME,EAAM,IAAI,EAAAD,EAAAE,UACVC,EAAeC,SAASC,cAAc,gBACtCC,EAAaF,SAASC,cAAc,oBACpCE,EAAeH,SAASI,eAAe,4BACvCC,EAAWL,SAASC,cAAc,WAemB,SAAlDK,EAAmBC,EAASC,GACnCH,EAASI,UAAY,GAErBZ,EACGa,qBAAqBH,EAASC,GAC9BG,MAAKC,GAC0B,IAA1BA,EAAOC,QAAQC,QACjBZ,EAAWO,UAAY,GACvBJ,EAASU,mBAAmB,YAAa,+DAClCH,KAGT,EAAAI,EAAAC,eAAcL,EAAOC,SACdD,KAERD,MAAKC,IACJ,IAAKT,EAAae,WAAWJ,QAAoC,IAA1BF,EAAOC,QAAQC,OAAc,EAC/C,EAAAK,EAAAC,kBACjBR,EAAOS,cACPT,EAAOC,QAAQC,OACf,EACAF,EAAOJ,MAEEc,GAAG,cAAcC,IAC1BjB,EAAmBC,EAASgB,EAAMf,KAAK,G,KAI5CgB,OAAMC,IACLC,QAAQC,IAAIF,EAAMG,QAAQ,G,CA1ChC7B,EAAa8B,iBAAiB,UAE9B,SAAsBC,GACpBA,EAAEC,iBACF,MAAMxB,EAAUuB,EAAEE,OAAOC,SAASC,YAAYC,MAAMC,OAEhD7B,IACFJ,EAAaM,UAAY,GACzBH,EAAmBC,EAAS,G","sources":["src/index.js","src/js/search-field.js"],"sourcesContent":["import './js/btn-up';\nimport './js/loader';\nimport './js/movie-api';\nimport './js/search-field';\nimport './js/filter';\nimport './js/create-card';\n// import './js/create-card-library';\nimport './js/modal-film-info';\nimport './js/modal-trailer';\nimport './js/pagination';\nimport './js/pagination-main'\nimport './js/modal-footer';\n\n\n\n// import { MovieAPI } from './js/movie-api';\n\n// var testApi = new MovieAPI();\n// testApi.getPopularFilmList().then(filmList => {\n//   console.log(filmList);\n// });\n","import { MovieAPI } from './movie-api';\nimport { createGallery } from './create-card';\nimport { createPagination } from './pagination';\n\nconst api = new MovieAPI();\nconst searchFormEl = document.querySelector('.form-search');\nconst cardListEl = document.querySelector('.card-list__main');\nconst paginationEl = document.getElementById('tui-pagination-container');\nconst notifyEl = document.querySelector('.notify');\n\nsearchFormEl.addEventListener('submit', onLoadMovies);\n\nfunction onLoadMovies(e) {\n  e.preventDefault();\n  const keyWord = e.target.elements.searchQuery.value.trim();\n\n  if (keyWord) {\n    paginationEl.innerHTML = '';\n    getMoviesByKeyWord(keyWord, 1);\n  }\n}\n\n//Поиск и отображение фильмов по ключевому слову и отрисовка пагинации\nfunction getMoviesByKeyWord(keyWord, page) {\n  notifyEl.innerHTML = '';\n\n  api\n    .getFilmListByKeyWord(keyWord, page)\n    .then(movies => { //Создание галереи по результатам запроса\n      if (movies.results.length === 0) {       \n        cardListEl.innerHTML = '';\n        notifyEl.insertAdjacentText('beforeend', 'Search result not successful. Enter the correct movie name.');\n        return movies;\n      }\n      \n      createGallery(movies.results);\n      return movies;\n    })\n    .then(movies => { //Отрисовка пагинации\n      if (!paginationEl.childNodes.length && movies.results.length !== 0) {\n        const pagination = createPagination(\n          movies.total_results,\n          movies.results.length,\n          7,\n          movies.page\n        );\n        pagination.on('beforeMove', event => {\n          getMoviesByKeyWord(keyWord, event.page);\n        });\n      }\n    })\n    .catch(error => {\n      console.log(error.message);\n    });\n}\n"],"names":["parcelRequire","$eqe5u","$dbf50b91b948eb36$var$api","MovieAPI","$dbf50b91b948eb36$var$searchFormEl","document","querySelector","$dbf50b91b948eb36$var$cardListEl","$dbf50b91b948eb36$var$paginationEl","getElementById","$dbf50b91b948eb36$var$notifyEl","$dbf50b91b948eb36$var$getMoviesByKeyWord","keyWord","page","innerHTML","getFilmListByKeyWord","then","movies","results","length","insertAdjacentText","$isffV","createGallery","childNodes","$2nhTy","createPagination","total_results","on","event","catch","error","console","log","message","addEventListener","e","preventDefault","target","elements","searchQuery","value","trim"],"version":3,"file":"index.9645df84.js.map"}